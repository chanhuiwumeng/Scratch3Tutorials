---
prev:
  text: 入门范例
  link: /入门范例/03-入门范例.md
next:
  text: 入门游戏
  link: /基础游戏/入门游戏.md
---

# 进阶范例 🏡

## 63.钟摆运动

::: tip 故事背景：
优美的钟摆在左右晃动着
:::

![](/pendulum-06.gif)

### 程序原理

删除预设的猫咪角色，绘制一个新的角色。

使用直线和圆形，绘制出钟摆的形状，将钟摆的末端和角色的圆心对齐(钟摆旋转时，以末端为中线旋转)

![](/Snipaste_2024-01-02_10-31-03.png)

绘制好角色以后，可以使用无线重复和右转搭配看到钟摆开始旋转了

![](/Snipaste_2024-01-02_10-32-33.png)

由于真正的钟摆不会等速度的绕远旋转，会根据下图的速度表现，越靠近两侧速度越慢，当钟摆降到最低的时候速度最快。

![](/pendulum-04.webp)

因为钟摆的圆周表现行为，所以可以使用三角函数 cos 来模拟，程序积木一开始先指定钟摆的预设角度，接着放入变量为 0，
重复无限次。

::: tip Cos 三角函数原理：
因为 cos(180)=1 cos(90)=0 cos(0) =1,所以变量会从负到正，在从正到负，当接近 90 度的时候，变化的幅度会远大于接近 180 和 0 度，这样就可以模拟钟摆的运动了。
:::

![](/Snipaste_2024-01-02_10-42-39.png)

## 64.简单的磁铁效果

::: tip 故事背景：
磁铁绘制出优美的磁极线
:::

![](/magnet-simple-08.gif)

### 程序原理

删除预设的猫咪角色，绘制一个新的角色。

使用圆形绘制出一个磁铁的角色，使用线条绘制出磁线的角色。

![](/Snipaste_2024-01-02_10-54-22.png)

点击蓝色磁铁的角色，设定点击绿旗的时候定位到舞台的中心(0,0),并设定角色的拖动模式设置为可拖动。

![](/Snipaste_2024-01-02_10-59-58.png)

点击磁铁线的角色，新建一个名称为 draw 的自制积木，勾选运行时不刷新屏幕。

![](/Snipaste_2024-01-02_11-03-22.png)

- 点击绿旗的时候，隐藏本尊，并执行 draw 的自制积木。
- draw 自制积木的内容:
  - 将磁铁定位到舞台的左上角(-240,150)
  - 使用重复 13 次积木(垂直重复)
  - 每次重复的时候再使用重复 23 次的积木(水平重复)
    - 每次重复执行的时候 x 增加 20,并克隆自己
  - 水平重复结束以后，将 x 设定为-240(移动到最左侧)
  - 将 y 改变-25(向下移动 25)

* 作为克隆体启动的时候

  - 显示
  - 重复执行 - 每次重复执行的时候 面向磁铁方向

![](/Snipaste_2024-01-02_11-11-06.png)

## 65.两个磁铁的磁力线

::: tip 故事背景：
两个磁铁绘制出优美的磁极线
:::

![](/magnetic-line-15.webp)

### 程序原理

根据 64 的案例进行修改，复制蓝色的磁铁将角色改成红色，三个角色的名称改为，黑色磁铁线，蓝色磁铁红色磁铁。

![](/Snipaste_2024-01-02_11-18-51.png)

点击蓝色的磁铁角色，设定角色点击绿旗的动作:

- 设定角色为可拖动模式，定位在舞台的左侧(-150,0)
- 使用重复无限次的积木
- 新增 ax,ay 的变量
- 每次重复的时候将 ax 设置为 x 坐标,ay 设置为 y 坐标

![](/Snipaste_2024-01-02_11-25-51.png)

点击红色的磁铁角色，设定角色点击绿旗的动作:

- 设定角色为可拖动模式，定位在舞台的左侧(150,0)
- 使用重复无限次的积木
- 新增 bx,by 的变量
- 每次重复的时候将 bx 设置为 x 坐标,by 设置为 y 坐标

![](/Snipaste_2024-01-02_11-25-31.png)

因为舞台上有两个磁铁，所以磁铁线必须判断距离那个近，根据距离进行对应的转动，空间中两点的距离可以根据下图的公式。

![](/magnetic-line-04.webp)

点击黑色的磁力线的角色，新建一个名称为 a 距离和 b 距离的两个变量，和一个名称为两点间直线的自制积木，包含四个参数。

![](/Snipaste_2024-01-02_11-31-49.png)

编辑两点间距离的自制积木:

- 设定变量 a 距离为(x1 平方+y1 平方)的平方根
- 设定变量 b 距离为(x2 平方+y2 平方)的平方根

![](/Snipaste_2024-01-02_11-52-18.png)

编辑当以克隆体启动:

- 执行两点间距离的自制积木，将两点的坐标相减的数值，带入函数的参数
  - 函数执行后会根据参数计算得到 a 距离和 b 距离两个变量的数值。
- 使用逻辑判断，如果 a 距离小于 b 距离，表示比较靠近蓝磁铁，就转向蓝磁铁
- 使用逻辑判断，如果 a 距离大于 b 距离，表示比较靠近红磁铁，就转向红磁铁

![](/Snipaste_2024-01-02_14-41-54.png)

完成以后的效果:

![](/magnetic-line-08.webp)

做到这一步虽然可以让磁铁线转向，但是对于模拟磁力线来说，所有的磁铁线都会被两个磁铁影响，而不是目前的二分法，所以接着对两点间距离的函数进行编辑。
新增 ab 距离和 h 的两个变量:

- ab 距离: 根据公式计算，计算蓝色磁铁和红色磁铁之间的间距
- h:磁铁线和红色磁铁之间的间距，如果 a 距离+b 距离大于 ab 距离，表示磁铁线越远离两个磁铁的中间。

![](/Snipaste_2024-01-02_14-48-26.png)

新增 a 强度和 b 强度两个变量,预设值为 5,表示两个磁铁的强度。

![](/Snipaste_2024-01-02_14-51-03.png)

新增一个名称为旋转方向的自制积木。增加一个名为 deg(角度)的参数，勾选运行时不刷新屏幕。

![](/Snipaste_2024-01-02_14-52-18.png)

观察舞台上两个磁铁，磁铁的区域共有 8 个：

![](/magnetic-line-10.webp)

根据八个对应的数值，编辑旋转方向的函数:

- 新增变量 n,数值为 0,作为辅助判断的使用
- 使用如果....那么的积木，进行对应的逻辑判断(额外判断如果 n 为 0)
- 如果符合条件将 n 设定为 1
- 全部判断结束以后，再将 n 设定为 0

8 个方向的判断条件如下:

![](/Snipaste_2024-01-02_14-58-22.png)

![](/Snipaste_2024-01-02_15-02-54.png)

![](/Snipaste_2024-01-02_15-03-10.png)

最后修改当作为克隆体启动的程序:

- 逻辑判断加入强度的变量
- 逻辑判断后，执行旋转方向的自制积木,程序的参数使用(5*b 强度/a 强度)或者 5*a 强度/b 强度,使用不同的强度时，根据比例就会有不同的变化

![](/Snipaste_2024-01-02_15-07-14.png)

最终完成的效果:

![](/两个磁铁的磁力线.gif)

## 66.立体空间(三维空间)

::: tip 故事背景：
小猫在三维空间中游荡
:::

![](/3-dimension-06.gif)

### 程序原理

点击选择背景，在舞台加入一个立体空间的背景(在太空类别中)

![](/3-dimension-01.webp)

设置猫咪的，当点击绿旗的时候，重复执行，移动到鼠标位置

- 新建一个变量名称为 size
- size 设置为 x 坐标的绝对值\*0.7 并将尺寸大小设置为 size 大小
- 舞台的中心点的坐标 x 为 0,左右两侧分别是-240 和 240,使用绝对值\*0.7 是避免尺寸太大

![](/Snipaste_2024-01-02_15-23-56.png)

![](/3-dimension-07.gif)

现在只有在水平方向移动的时候才会变小，还要加入 y 方向的判断

- 加入如果那么，判断如果 y 坐标*1.33 的绝对值大于 x 坐标的绝对值，就以 y 坐标*1.33 的绝对值为主
- 第二个如果那么，判断如果坐标的绝对值大于 y 坐标的局对峙*1.33 的绝对值，就以 y 坐标*1.33 的绝对值为主

![](/Snipaste_2024-01-02_15-29-58.png)

## 67.沿着轨迹移动

::: tip 故事背景：
七星瓢虫沿着轨道前进
:::

![](/follow-line-07.gif)

### 程序原理

删除预设的猫咪角色，添加七色昆虫的角色.

使用绘图工具，绘制一红一绿两个圆形，放置在昆虫的触须下方.

![](/Snipaste_2024-01-02_16-48-28.png)

使用绘图工具，绘制一个舞台的背景，使用黑色线条绘制出昆虫移动的轨迹。(使用圆形，方形，变形工具绘制)

![](/Snipaste_2024-01-02_16-55-03.png)

这个程序采用的是，黑色在红色和绿色的中间，碰到红色就向偏右，碰到绿色就偏左，没有碰到就加速前进

![](/Snipaste_2024-01-02_16-56-26.png)

程序设计:

![](/Snipaste_2024-01-02_16-58-45.png)

## 68.抛物线发射炮弹

::: tip 故事背景：
沿着抛物线发射炮弹
:::

![](/parabola-fire-08.gif)

### 程序原理

删除预设的猫咪角色，绘制大炮和炮弹的角色。

![](/Snipaste_2024-01-03_10-19-53.png)

炮弹角色是一个红色的圆，圆形的位置在大炮的炮口位置，不能在画布的中心。

![](/Snipaste_2024-01-03_10-21-20.png)

大炮和炮弹的相对位置:

![](/parabola-fire-04.gif)

点击大炮角色，编辑程序:

- 点击绿旗的时候，定位到(-200,-140),并移到最前面
- 使用重复执行的积木，让大炮面向鼠标的方向

![](/Snipaste_2024-01-03_10-27-17.png)

点击炮弹的角色，编辑炮弹的程序:

- 当绿旗被点击的时候，隐藏炮弹，定位到和大炮一样的位置(-200,-140)
- 设定重力加速度的变量为-2
- 使用重复执行的积木，让炮弹面向鼠标的位置(鼠标移动到哪里，炮弹转向到哪里)
- 点击鼠标的时候，每隔 0.01 秒克隆一个分身

![](/Snipaste_2024-01-03_10-32-26.png)

作为克隆体启动的时候:

- 设定 x 和 y 的变量，变量的数值为距离鼠标之间的距离，距离越大，发射的速度就越快
- 使用重复执行到的积木，判断炮弹的 y 坐标落地后就删除克隆体
- 每次重复改变 y 的数值，改变的数值幅度为(重力加速度)的数值

![](/Snipaste_2024-01-03_10-39-47.png)

## 69.地球绕着太阳转

::: tip 故事背景：
地球绕着太阳日复一日的旋转...
:::

![](/earth-sun-06.gif)

### 程序原理

删除预设的猫咪角色，添加地球和太阳的角色。和黑夜的背景。

![](/Snipaste_2024-01-03_10-49-40.png)

点击地球的角色，编辑程序:

- 点击绿旗
- 尺寸设置为 30%
- 添加半径的变量，初始值设置为 100
- x 坐标设置为太阳的 x 坐标
- y 坐标设置为太阳的 y 坐标
- x 增加半径的值

![](/Snipaste_2024-01-03_11-22-53.png)

如果要让地球以太阳为中心，绕着太阳进行圆周运动，就需要通过<b>三角函数</b>，计算地球的 xy 坐标

![](/earth-sun-04.webp)

将上面的程序，新建一个角度的变量，并加入重复执行的积木，将 x/y 的数值改成三角函数进行计算

![](/Snipaste_2024-01-03_11-37-06.png)

太阳角色定位到舞台的中心

![](/Snipaste_2024-01-03_11-37-42.png)

## 70.弹跳的篮球

::: tip 故事背景：
篮球有规律的弹跳着...
:::

![](/basketball-08.gif)

### 程序原理

删除预设的猫咪角色，选择篮球角色。

![](/Snipaste_2024-01-03_11-49-34.png)

首先制作<b>自由落体</b>的加速度程序，添加两个变量，移动距离(预设值为 0),加速度(预设值为-1),使用重复无限次的积木，移动距离根据加速度
而不断变化，篮球的 y 坐标根据移动距离不断改变。

<b>标准的加速度公式(s= V0t + ½gt²)可以知道篮球每单位时间内移动的距离会越来越长</b>

![](/Snipaste_2024-01-03_12-02-24.png)

点击绿旗就可以看到篮球以等加速度的方式落下

![](/basketball-03.webp)

在舞台区域，用鼠标将篮球移到地狱，记录篮球的 y 坐标(-158)

修改程序加入碰到边缘的判断，判断如果碰到边缘，就让移动距离乘以-0.8,这样就能反转 y 方向的移动并且模拟越跳越矮的效果，
同时为了避免超过范围，额外设定 y 为-158,如果没有碰到边缘，就按照正常的等加速度移动。

![](/Snipaste_2024-01-03_12-11-23.png)

完成以后的效果:

![](/basketball-06.gif)

因为移动的距离是诚意小数点，所以在接近边缘的时候换行可能会有一些细微的跳动，如果要修正这些跳动，可以加入移动距离的判断，判断如果太小的移动距离,就直接让移动
距离归零。

![](/Snipaste_2024-01-03_12-16-09.png)

## 71.电风扇

::: tip 故事背景：
炎热的夏天，有一台电风扇真好...
:::

![](/fan-17.gif)

### 程序原理

删除预设的猫咪角色，绘制电风扇角色。

![](/Snipaste_2024-01-03_14-49-09.png)

继续绘制一个新的按钮角色，名称改为 1，对齐画布中心。

![](/Snipaste_2024-01-03_14-55-47.png)

重复上述步骤，绘制出<b>弱</b>,<b>中</b>,<b>强</b>三个角色。

![](/Snipaste_2024-01-03_14-56-10.png)

点击<b>关</b>的按钮，编辑程序:

- 当绿旗被点击，切换为造型 2(红底造型)
- 当绿旗被点击的时候广播关的消息，造型切换为造型 2(红底)
- 当接收到<b>弱</b>,<b>中</b>,<b>强</b>的消息是造型切换为 1(白底造型)

![](/Snipaste_2024-01-03_14-59-57.png)

重复同样的步骤，编辑<b>弱</b>,<b>中</b>,<b>强</b>三个按钮的角色动作。

![](/Snipaste_2024-01-03_15-04-51.png)

点击风扇的角色，编辑程序:

- 新增速度的变量，将速度变量设置为 0
- 广播关的消息
- 使用重复无限次的积木，按照速度变量的数值，进行右转的动作。

![](/Snipaste_2024-01-03_15-07-52.png)

接着加入接收到<b>关</b>,<b>弱</b>,<b>中</b>,<b>强</b>的积木，执行对应的动作.

- 当接收到关的消息，使用重复直到的积木，直到速度等于 0,每次将速度-1
- 当接收到弱的消息，将速度设定为 15
- 当接收到中的消息，将速度设定为 30
- 当接收到强的消息，将速度设定为 45

![](/Snipaste_2024-01-03_15-11-45.png)

虽然这样做可以看嗲风扇的速度在变化，但是没有加速度的过程，因此重新编辑程序.

新增 run 和 stop 的变量，在点击绿旗的时候设定变量 run 为 0(表示尚未开始)

- 变量 run: 判断改状态是否开始
- 变量 stop: 判断改状态是否停止

![](/Snipaste_2024-01-03_15-13-51.png)

新增一个名称为加速的自制积木，添加一个名称为 a 的参数，不勾选运行时不刷新屏幕.

![](/Snipaste_2024-01-03_15-14-58.png)

编辑加速度的程序:

- 设定变量 run 为 1，表示改状态开始
- 使用重复无限次的积木，重复直到速度等于 1 或者 stop 等于 1 为止(速度达到指定的速度或者被强制停止)
- 每次重复的时候，判断如果速度大于指定的速度 a,就将速度减少
- 如果速度小于指定的速度 a,就增加速度
- 重复结束以后吗，将 run 设定为 0,表示改状态完成(速度达到指定的速度或者被强制停止)

![](/Snipaste_2024-01-03_15-18-06.png)

在新建一个名称为切换的自制积木，添加一个名称为强度的参数。

![](/Snipaste_2024-01-03_15-18-56.png)

编辑强度的程序:

- 将变量 stop 设置为 1(切换强度时，搭配加速的函数，强制停止目前的状态)
- 等待直到 run 为 0,表示可以开始进行下一个状态
- 设定 stop 为 0,表示可以继续开始
- 执行加速的函数，将强度参数提供给加速度的函数

![](/Snipaste_2024-01-03_15-20-54.png)

完成两个函数以后，修改收到信息的动作。完成所有的效果.

![](/Snipaste_2024-01-03_15-22-00.png)

## 72.拉不走的弹力球

::: tip 故事背景：
怎么样都拉不走的弹力球...
:::

![](/pull-ball-06.gif)

### 程序原理

删除预设的猫咪角色，加入足球的角色。

![](/Snipaste_2024-01-03_15-40-15.png)

首先使用定位，将足球定位到舞台的中心，接着使用重复无限次的积木，和如果....那么...否则。判断鼠标正在拖拉足球(鼠标按下+鼠标碰到足球)，
就让足球移动到鼠标的位置，反之如果松开鼠标(鼠标按下不成立),就让足球在 0.2 秒内移动到舞台中心.

![](/Snipaste_2024-01-03_15-43-53.png)

完成以后就可以看到效果.

![](/pull-ball-03.gif)

接下来加入扩展画笔的功能,希望做出拖拉足球的时候，出现一条将足球拉回中心点的线段，修改原来的程序，
新增加一个名称为鼠标按下的变量，将如果碰到切按下鼠标的时候，修改鼠标按下的变量的值为 1，如果鼠标按下不成立，设置值为 0

![](/Snipaste_2024-01-03_15-47-21.png)

接着编辑程序:

- 小绿旗被点击，使用重复无限次的积木
- 清除全部的笔记
- 抬笔
- 判断如果按下鼠标的变量值等于 1
  - 定位到(0,0)
  - 落笔
  - 移动到鼠标的位置
- 判断鼠标按下的变量为 0
  - 在 0.2 秒内移动到(0.0)

![](/Snipaste_2024-01-03_15-50-58.png)

完成效果。
